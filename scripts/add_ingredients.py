import sys
import urllib.request
import urllib.error
import json

def add_ingredient(endpoint_url, ingredient_name):
  headers = {'Content-Type': 'application/json'}
  data = json.dumps({'name': ingredient_name}).encode('utf-8')

  try:
    req = urllib.request.Request(endpoint_url, data=data, headers=headers, method='POST')
    with urllib.request.urlopen(req) as response:
      if response.getcode() == 201:
        response_data = json.loads(response.read().decode('utf-8'))
        return f"Successfully created ingredient '{ingredient_name}': {response_data}"
      else:
        return f"Failed to create ingredient '{ingredient_name}': {response.getcode()} - {response.read().decode('utf-8')}"
  except urllib.error.HTTPError as e:
    return f"Error creating ingredient '{ingredient_name}': HTTP {e.code} - {e.read().decode('utf-8')}"
  except urllib.error.URLError as e:
    return f"Error creating ingredient '{ingredient_name}': {str(e)}"
  except Exception as e:
    return f"Unexpected error creating ingredient '{ingredient_name}': {str(e)}"

def main():
  endpoint_url = "http://localhost:8080/ingredients"
  ingredient_names = sys.argv[1:] if len(sys.argv) > 1 else [
    "аджика",
    "армянский лаваш",
    "базилик сухой",
    "базилик",
    "баклажан",
    "бальзамический уксус",
    "банан",
    "бекон",
    "болгарский перец",
    "брынза",
    "бульон куриный",
    "бульон овощной",
    "ванилин",
    "вермишель",
    "ветчина",
    "винный уксус",
    "вода",
    "говядина",
    "голень куриная",
    "горчица зернистая",
    "горчица",
    "дрожжи быстродействующие",
    "заправка для салата цезарь",
    "зеленый горошек",
    "зеленый лук",
    "зелень",
    "имбирь",
    "кабачок",
    "какао порошок",
    "кальмар",
    "капуста белокочанная",
    "капуста пекинская",
    "карри",
    "картофель молодой",
    "картофель",
    "картофельный крахмал",
    "квашеная капуста",
    "кетчуп",
    "кефир",
    "кинза",
    "колбаса салями",
    "колбаса сырокопчёная",
    "колбаса",
    "колбаски баварские",
    "консервированный ананас",
    "консервированный горошек",
    "корень имбиря",
    "кориандр",
    "корица молотая",
    "крабовые палочки",
    "красный молотый перец",
    "крахмал кукурузный",
    "крахмал",
    "креветки королевские",
    "креветки салатные",
    "крекеры",
    "крупа гречневая",
    "кукуруза консервированная",
    "кукурузные хлопья",
    "кунжут",
    "кунжутное масло",
    "куриная грудка",
    "куриное филе",
    "куриные крылышки",
    "курица",
    "куркума",
    "лавровый лист",
    "лапша",
    "лимон",
    "листовой салат",
    "листья салата",
    "лук порей",
    "лук репчатый",
    "лук салатный",
    "лук",
    "майонез",
    "манная крупа",
    "маргарин",
    "маслины",
    "масло оливковое",
    "масло растительное",
    "масло сливочное",
    "минтай",
    "морковь",
    "моцарелла",
    "мука пшеничная",
    "мускатный орех",
    "мягкий плавленый сыр",
    "мясной бульон",
    "нерафинированное растительное масло",
    "огурцы солёные",
    "огурцы",
    "оливки",
    "орегано",
    "орехи",
    "острый перец",
    "паприка копченая",
    "паприка",
    "паста томатная",
    "паста"
    "перец молотый",
    "перец острый",
    "перец сладкий",
    "перец черный",
    "перец чили",
    "петрушкa",
    "петрушка",
    "печень куриная",
    "помидоры черри",
    "помидоры",
    "порошок карри",
    "порошок чесночный",
    "приправа для курицы",
    "прованские травы",
    "разрыхлитель",
    "растительное масло",
    "ребра свиные",
    "репчатый лук",
    "рис",
    "салат зеленый",
    "сахар коричневый",
    "сахар",
    "сахарная пудра",
    "свекла",
    "свинина мякоть",
    "свинина",
    "свиной фарш",
    "сгущенное молоко",
    "сельдерей",
    "семга",
    "сладкая паприка",
    "сладкий перец красный",
    "сливки (33%)",
    "сливки",
    "сливочное масло",
    "смесь итальянских трав",
    "сметана 20%",
    "сметана",
    "сода",
    "соевый соус",
    "сок лимона",
    "соленые огурцы",
    "соль",
    "соус ткемали",
    "соус хойсин",
    "соус чили",
    "спагетти",
    "спелый авокадо",
    "средиземноморские травы",
    "сухари панировочные",
    "сушеная петрушка",
    "сыр адыгейский",
    "сыр моцарелла",
    "сыр пармезан",
    "сыр плавленный",
    "сыр сулугуни",
    "сыр творожный",
    "сыр твёрдый",
    "тарталетки из песочного теста",
    "творог обезжиренный",
    "творог",
    "тимьян",
    "тмин молотый",
    "томатная паста",
    "тыква",
    "укроп",
    "уксус 6 %",
    "фарш мясной",
    "фарш смешанный",
    "фета",
    "филе индейки",
    "филе куриной грудки",
    "хлопья острого перца",
    "хмели",
    "чеснок",
    "шампиньоны",
    "шпинат",
    "яблоки",
    "яйца",
  ]

  for name in ingredient_names:
    result = add_ingredient(endpoint_url, name)
    print(result)

if __name__ == "__main__":
  main()
